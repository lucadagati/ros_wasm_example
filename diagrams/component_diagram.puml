@startuml Component Diagram
!theme plain
skinparam backgroundColor #FFFFFF
skinparam roundcorner 10

title System Component Diagram\nmicroROS Components in WASM

package "WASM Runtime Environment" {
    component [WASM Runtime\n(Wasmtime/Wasmer)] as RUNTIME #667eea
    
    package "microROS Stack (in WASM)" {
        component [microROS Core] as CORE #4CAF50
        component [ROS2 DDS Layer] as DDS #FFC107
        component [WASI Interface] as WASI #9C27B0
        component [Node Logic] as NODE #f5576c
        
        CORE --> DDS : uses
        CORE --> WASI : system calls
        CORE --> NODE : manages
        DDS --> WASI : network I/O
    }
    
    RUNTIME --> CORE : executes
    RUNTIME --> DDS : executes
    RUNTIME --> NODE : executes
}

package "Kubernetes Layer" {
    component [K8s Pod] as POD
    component [Container Runtime] as CONTAINER
    component [Service Mesh] as MESH
    
    POD --> CONTAINER : contains
    CONTAINER --> RUNTIME : runs
    MESH --> POD : manages
}

package "ROS2 Network" {
    component [DDS Discovery] as DISCOVERY
    component [ROS Topics] as TOPICS
    component [ROS Services] as SERVICES
    
    DDS --> DISCOVERY : participates
    DDS --> TOPICS : publishes/subscribes
    DDS --> SERVICES : provides/consumes
}

note right of CORE
  **All ROS functionality**
  **runs inside WASM:**
  
  • No external bridge
  • Direct DDS communication
  • Full ROS2 compatibility
end note

@enduml
